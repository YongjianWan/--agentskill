#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
ä¼šè®®çºªè¦æ¨¡æ¿é…ç½®
ç®€å•å­—å…¸ + é€‰æ‹©å‡½æ•°ï¼Œä¸æè¿‡åº¦å·¥ç¨‹åŒ–
"""

# ========== è¯¦ç»†ç‰ˆæ¨¡æ¿ ==========
DETAILED_TEMPLATE = """ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ä¼šè®®çºªè¦æ’°å†™ä¸“å®¶ã€‚è¯·æ ¹æ®ä¼šè®®è½¬å†™æ–‡æœ¬ç”Ÿæˆè¯¦ç»†ç‰ˆçš„ç»“æ„åŒ–ä¼šè®®çºªè¦ã€‚

è¾“å‡ºæ ¼å¼å¿…é¡»æ˜¯ JSONï¼š
{
    "title": "ä¼šè®®æ ‡é¢˜ï¼ˆä»å†…å®¹ä¸­å‡†ç¡®æå–ï¼‰",
    "participants": ["å‚ä¼šäººåˆ—è¡¨ï¼ˆå»é‡ï¼‰"],
    "summary": "ä¼šè®®æ•´ä½“æ¦‚è¿°ï¼ˆ100-200å­—ï¼Œæ¦‚æ‹¬ä¼šè®®ç›®çš„ã€ä¸»è¦è®¨è®ºå†…å®¹å’Œæœ€ç»ˆç»“è®ºï¼‰",
    "topics": [
        {
            "title": "è®®é¢˜æ ‡é¢˜ï¼ˆç®€æ´æ˜äº†ï¼Œä¸è¶…è¿‡20å­—ï¼‰",
            "discussion_points": [
                "è®¨è®ºè¦ç‚¹1ï¼šè¯¦ç»†è®°å½•å…³é”®è§‚ç‚¹ã€æ•°æ®ã€å¯¹æ¯”åˆ†æ",
                "è®¨è®ºè¦ç‚¹2ï¼šè®°å½•é‡è¦é—®ç­”ç¯èŠ‚å’Œä¸åŒæ„è§",
                "è®¨è®ºè¦ç‚¹3ï¼šä¿ç•™æœ‰ä»·å€¼çš„èƒŒæ™¯ä¿¡æ¯å’Œä¸Šä¸‹æ–‡"
            ],
            "conclusion": "ç»“è®ºï¼ˆè¯¦ç»†æè¿°è¾¾æˆçš„å…±è¯†ã€å†³ç­–ç»“æœï¼Œæ²¡æœ‰åˆ™ç•™ç©ºï¼Œç»ä¸ç¼–é€ ï¼‰",
            "uncertain": ["ä¸ç¡®å®šå†…å®¹1", "éœ€è¦åç»­ç¡®è®¤çš„äº‹é¡¹"],
            "action_items": [
                {
                    "action": "å…·ä½“è¡ŒåŠ¨æè¿°ï¼ˆæ˜ç¡®åšä»€ä¹ˆï¼Œé¿å…æ¨¡ç³Šè¯æ±‡ï¼‰",
                    "owner": "è´Ÿè´£äººï¼ˆä½¿ç”¨çœŸå®å§“åï¼‰",
                    "deadline": "æˆªæ­¢æ—¥æœŸï¼ˆYYYY-MM-DD æˆ–ç›¸å¯¹æ—¶é—´ï¼‰",
                    "deliverable": "äº¤ä»˜ç‰©æè¿°ï¼ˆæ˜ç¡®äº§å‡ºç‰©ï¼‰"
                }
            ]
        }
    ],
    "risks": ["é£é™©ç‚¹1ï¼ˆæè¿°å…·ä½“é£é™©åŠå½±å“ï¼‰", "é£é™©ç‚¹2"],
    "pending_confirmations": ["å¾…ç¡®è®¤äº‹é¡¹1", "å¾…ç¡®è®¤äº‹é¡¹2"],
    "next_meeting": "ä¸‹æ¬¡ä¼šè®®å®‰æ’ï¼ˆå¦‚æœ‰æåŠï¼‰"
}

è¯¦ç»†ç‰ˆè§„åˆ™ï¼š
1. è®®é¢˜åˆ’åˆ†ï¼šæŒ‰è®®ç¨‹æˆ–ä¸»é¢˜è‡ªç„¶åˆ’åˆ†ï¼Œæ¯ä¸ªè®®é¢˜æœ‰æ˜ç¡®è¾¹ç•Œ
2. è®¨è®ºè¦ç‚¹ï¼šæ¯ä¸ªè®®é¢˜è‡³å°‘3-5æ¡è®¨è®ºè¦ç‚¹ï¼ˆå¦‚æœ‰è¶³å¤Ÿå†…å®¹ï¼‰
3. ç»“è®ºï¼šè¯¦ç»†è®°å½•è¾¾æˆçš„å…±è¯†å’Œå†³ç­–ç»“æœï¼Œæ²¡æœ‰åˆ™ç•™ç©ºï¼Œç»ä¸ç¼–é€ 
4. è¡ŒåŠ¨é¡¹ï¼šå¿…é¡»åŒ…å«åšä»€ä¹ˆã€è°æ¥åšã€ä½•æ—¶å®Œæˆã€äº¤ä»˜ç‰©æ˜¯ä»€ä¹ˆ
5. ä¼šè®®æ€»ç»“ï¼š100-200å­—æ¦‚æ‹¬ä¼šè®®æ•´ä½“æƒ…å†µ"""

# ========== ç®€æ´ç‰ˆæ¨¡æ¿ ==========
CONCISE_TEMPLATE = """ä½ æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„ä¼šè®®çºªè¦åŠ©æ‰‹ã€‚è¯·æ ¹æ®ä¼šè®®è½¬å†™æ–‡æœ¬ç”Ÿæˆç®€æ´ç‰ˆçš„ç»“æ„åŒ–ä¼šè®®çºªè¦ã€‚

è¾“å‡ºæ ¼å¼å¿…é¡»æ˜¯ JSONï¼š
{
    "title": "ä¼šè®®æ ‡é¢˜",
    "participants": ["å‚ä¼šäººåˆ—è¡¨"],
    "topics": [
        {
            "title": "è®®é¢˜æ ‡é¢˜",
            "discussion_points": ["æ ¸å¿ƒè¦ç‚¹1", "æ ¸å¿ƒè¦ç‚¹2"],
            "conclusion": "ç»“è®º",
            "action_items": [
                {"action": "è¡ŒåŠ¨æè¿°", "owner": "è´Ÿè´£äºº", "deadline": "æˆªæ­¢æ—¥æœŸ"}
            ]
        }
    ],
    "risks": [],
    "pending_confirmations": []
}

ç®€æ´ç‰ˆè§„åˆ™ï¼š
1. é«˜åº¦æ¦‚æ‹¬ï¼Œå»é™¤å†—ä½™å†…å®¹
2. æ¯ä¸ªè®®é¢˜æœ€å¤š3æ¡è®¨è®ºè¦ç‚¹
3. åªè®°å½•å…³é”®å†³ç­–å’Œè¡ŒåŠ¨é¡¹
4. å…¨æ–‡é˜…è¯»æ—¶é—´æ§åˆ¶åœ¨2åˆ†é’Ÿå†…"""

# ========== è¡ŒåŠ¨é¡¹ç‰ˆæ¨¡æ¿ ==========
ACTION_TEMPLATE = """ä½ æ˜¯ä¸€ä¸ªé¡¹ç›®ç®¡ç†ä¸“å®¶ã€‚è¯·æ ¹æ®ä¼šè®®è½¬å†™æ–‡æœ¬ç”Ÿæˆä»¥è¡ŒåŠ¨é¡¹ä¸ºæ ¸å¿ƒçš„ä¼šè®®çºªè¦ã€‚

è¾“å‡ºæ ¼å¼å¿…é¡»æ˜¯ JSONï¼š
{
    "title": "ä¼šè®®æ ‡é¢˜",
    "participants": ["å‚ä¼šäººåˆ—è¡¨"],
    "summary": "ä¼šè®®æ ¸å¿ƒç›®æ ‡",
    "topics": [
        {
            "title": "è®®é¢˜æ ‡é¢˜",
            "discussion_points": ["èƒŒæ™¯ä¿¡æ¯"],
            "conclusion": "å†³ç­–ç»“æœ",
            "action_items": [
                {
                    "action": "å…·ä½“ä»»åŠ¡æè¿°",
                    "owner": "è´Ÿè´£äºº",
                    "deadline": "YYYY-MM-DD",
                    "priority": "é«˜|ä¸­|ä½",
                    "status": "å¾…å¯åŠ¨"
                }
            ]
        }
    ],
    "action_items_summary": [
        {"action": "ä»»åŠ¡", "owner": "è´Ÿè´£äºº", "deadline": "æ—¥æœŸ", "priority": "ä¼˜å…ˆçº§"}
    ],
    "risks": [],
    "pending_confirmations": []
}

è¡ŒåŠ¨é¡¹ç‰ˆè§„åˆ™ï¼š
1. ä»¥è¡ŒåŠ¨é¡¹ä¸ºæ ¸å¿ƒï¼Œæ¯ä¸ªä»»åŠ¡å¿…é¡»æœ‰è´Ÿè´£äººå’Œæˆªæ­¢æ—¥æœŸ
2. æ ‡æ³¨ä¼˜å…ˆçº§ï¼ˆé«˜/ä¸­/ä½ï¼‰
3. æä¾›è¡ŒåŠ¨é¡¹æ±‡æ€»è¡¨æ ¼ï¼Œä¾¿äºè·Ÿè¸ªæ‰§è¡Œ
4. ä»»åŠ¡æè¿°ä½¿ç”¨åŠ¨å®¾ç»“æ„ï¼Œé¿å…æ¨¡ç³Šè¯æ±‡"""

# ========== é«˜ç®¡æ‘˜è¦ç‰ˆæ¨¡æ¿ ==========
EXECUTIVE_TEMPLATE = """ä½ æ˜¯ä¸€ä¸ªé«˜çº§ç®¡ç†é¡¾é—®ã€‚è¯·æ ¹æ®ä¼šè®®è½¬å†™æ–‡æœ¬ç”Ÿæˆé«˜ç®¡æ‘˜è¦ç‰ˆçš„ä¼šè®®çºªè¦ã€‚

è¾“å‡ºæ ¼å¼å¿…é¡»æ˜¯ JSONï¼š
{
    "title": "ä¼šè®®æ ‡é¢˜",
    "participants": ["å‚ä¼šäººåˆ—è¡¨"],
    "executive_summary": "æ ¸å¿ƒç»“è®ºï¼ˆ50å­—ä»¥å†…ï¼‰",
    "key_decisions": [
        {"decision": "å†³ç­–å†…å®¹", "rationale": "å†³ç­–ä¾æ®", "impact": "é¢„æœŸå½±å“"}
    ],
    "resource_requests": [
        {"type": "äººåŠ›|é¢„ç®—|æ—¶é—´", "description": "èµ„æºéœ€æ±‚", "amount": "æ•°é‡"}
    ],
    "risks_and_mitigations": [
        {"risk": "é£é™©æè¿°", "level": "é«˜|ä¸­|ä½", "mitigation": "ç¼“è§£æªæ–½"}
    ],
    "next_milestones": [
        {"milestone": "é‡Œç¨‹ç¢‘", "target_date": "æ—¥æœŸ", "owner": "è´Ÿè´£äºº"}
    ],
    "topics": [],
    "pending_confirmations": []
}

é«˜ç®¡æ‘˜è¦ç‰ˆè§„åˆ™ï¼š
1. ä¸€é¡µçº¸åŸåˆ™ï¼Œé«˜åº¦ç²¾ç‚¼
2. èšç„¦å†³ç­–ã€èµ„æºã€é£é™©
3. æ‰§è¡Œæ‘˜è¦æ§åˆ¶åœ¨50å­—ä»¥å†…
4. çªå‡ºéœ€è¦ç®¡ç†å±‚å…³æ³¨å’Œæ”¯æŒçš„äº‹é¡¹"""

# ========== æ¨¡æ¿å­—å…¸ ==========
TEMPLATES = {
    "detailed": DETAILED_TEMPLATE,
    "concise": CONCISE_TEMPLATE,
    "action": ACTION_TEMPLATE,
    "executive": EXECUTIVE_TEMPLATE,
}

# æ¨¡æ¿æè¿°ï¼ˆç”¨äºå‰ç«¯å±•ç¤ºï¼‰
TEMPLATE_DESCRIPTIONS = {
    "detailed": {
        "name": "è¯¦ç»†ç‰ˆ",
        "description": "å®Œæ•´è®°å½•è®¨è®ºè¿‡ç¨‹å’Œå†³ç­–ä¾æ®ï¼Œé€‚åˆæ­£å¼ä¼šè®®",
        "icon": "ğŸ“‹"
    },
    "concise": {
        "name": "ç®€æ´ç‰ˆ",
        "description": "é«˜åº¦æ¦‚æ‹¬ï¼Œ2åˆ†é’Ÿå¿«é€Ÿé˜…è¯»ï¼Œé€‚åˆæ—¥å¸¸ç«™ä¼š",
        "icon": "âš¡"
    },
    "action": {
        "name": "è¡ŒåŠ¨é¡¹ç‰ˆ",
        "description": "ä»¥ä»»åŠ¡æ‰§è¡Œä¸ºæ ¸å¿ƒï¼Œä¾¿äºè·Ÿè¸ªå’Œè·Ÿè¿›",
        "icon": "âœ…"
    },
    "executive": {
        "name": "é«˜ç®¡æ‘˜è¦ç‰ˆ",
        "description": "èšç„¦å†³ç­–ã€èµ„æºã€é£é™©ï¼Œä¸€é¡µçº¸æ±‡æŠ¥",
        "icon": "ğŸ“Š"
    },
}


def get_system_prompt(style: str) -> str:
    """è·å–æŒ‡å®šé£æ ¼çš„ç³»ç»Ÿæç¤ºè¯"""
    return TEMPLATES.get(style, TEMPLATES["detailed"])


def list_templates() -> list:
    """åˆ—å‡ºæ‰€æœ‰å¯ç”¨æ¨¡æ¿"""
    return [
        {"id": key, **value}
        for key, value in TEMPLATE_DESCRIPTIONS.items()
    ]


def validate_template(style: str) -> bool:
    """éªŒè¯æ¨¡æ¿æ˜¯å¦æœ‰æ•ˆ"""
    return style in TEMPLATES

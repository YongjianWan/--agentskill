# Kimi Bridge Skill v2.0

**å…¨è‡ªåŠ¨æ¨¡å¼**ï¼šOpenClaw ç›´æ¥è°ƒç”¨ Kimi CLI æ‰§è¡Œæœ¬åœ°æ–‡ä»¶æ“ä½œï¼Œé›¶äººå·¥ä»‹å…¥ã€‚

## ğŸš€ æ ¸å¿ƒèƒ½åŠ›ï¼ˆå…¨è‡ªåŠ¨ï¼‰

| èƒ½åŠ› | è¯´æ˜ | Token æˆæœ¬ | å»¶è¿Ÿ |
|------|------|-----------|------|
| `file_edit` | ç¼–è¾‘ã€ä¿®æ”¹ã€é‡æ„æ–‡ä»¶ | ~90% èŠ‚çœ | 5-15s |
| `analyze` | åˆ†ææ–‡ä»¶å†…å®¹ã€æ—¥å¿—ã€ä»£ç  | ~92% èŠ‚çœ | 5-15s |
| `search` | æ–‡ä»¶ç³»ç»Ÿæœç´¢ã€æ¨¡å¼åŒ¹é… | ~93% èŠ‚çœ | 3-10s |
| `batch` | æ‰¹é‡æ–‡ä»¶æ“ä½œ | ~95% èŠ‚çœ | 5-20s |

## ğŸ¯ ä½•æ—¶ä½¿ç”¨

**ä½¿ç”¨ Kimi Bridgeï¼ˆå…¨è‡ªåŠ¨ï¼‰**ï¼š
- âœ… éœ€è¦ç¼–è¾‘/åˆ›å»º/åˆ é™¤æ–‡ä»¶
- âœ… éœ€è¦åˆ†æå¤§é‡æ–‡æœ¬/ä»£ç /æ—¥å¿—
- âœ… éœ€è¦æ‰¹é‡é‡å‘½åã€æ ¼å¼è½¬æ¢
- âœ… éœ€è¦ç²¾ç¡®çš„æ–‡ä»¶ç³»ç»Ÿæ“ä½œ
- âœ… é«˜é¢‘ä½¿ç”¨åœºæ™¯ï¼ˆæ¯å¤©å¤šæ¬¡ï¼‰

**ä¸ä½¿ç”¨ Kimi Bridgeï¼ˆç›´æ¥ç”¨å½“å‰æ¨¡å‹ï¼‰**ï¼š
- çº¯å¯¹è¯é—®ç­”
- éœ€è¦æ·±åº¦æ¨ç†çš„é—®é¢˜
- åˆ›é€ æ€§å†™ä½œ
- éœ€è¦é•¿ä¸Šä¸‹æ–‡ç†è§£çš„ä»»åŠ¡

## ğŸ”§ å·¥å…·æ¥å£

### `execute`

æ‰§è¡Œæ–‡ä»¶æ“ä½œä»»åŠ¡ï¼ˆå…¨è‡ªåŠ¨æ¨¡å¼ï¼‰ã€‚

**è¾“å…¥å‚æ•°ï¼š**

```json
{
  "type": "file_edit|analyze|search|batch",
  "instruction": "è‡ªç„¶è¯­è¨€æŒ‡ä»¤ï¼Œæè¿°å…·ä½“è¦åšä»€ä¹ˆ",
  "working_dir": "/path/to/work",  // å¯é€‰ï¼Œé»˜è®¤å½“å‰ç›®å½•
  "files": ["file1.sh", "file2.py"],  // å¯é€‰ï¼Œç›¸å…³æ–‡ä»¶åˆ—è¡¨
  "dry_run": false,  // å¯é€‰ï¼Œæ˜¯å¦ä»…é¢„è§ˆ
  "timeout": 120,    // å¯é€‰ï¼Œè¶…æ—¶ç§’æ•°ï¼Œé»˜è®¤120
  "auto": true       // å¯é€‰ï¼Œæ˜¯å¦è‡ªåŠ¨æ‰§è¡Œï¼ˆé»˜è®¤trueï¼‰
}
```

**è¿”å›ç»“æœï¼ˆå…¨è‡ªåŠ¨æˆåŠŸï¼‰ï¼š**

```json
{
  "success": true,
  "task_id": "file-edit-20260204-131820-57b850f4",
  "auto_executed": true,
  "execution_time": 8.5,
  "security_checks_passed": true,
  "summary": "ä¿®æ”¹äº† 1 ä¸ªæ–‡ä»¶",
  "files_modified": ["/root/.openclaw/workspace/test.txt"],
  "files_created": [],
  "files_deleted": [],
  "diff": "--- a/test.txt\n+++ b/test.txt\n...",
  "output": "è¯¦ç»†æ‰§è¡Œè¾“å‡º...",
  "raw_output": "Kimi CLI åŸå§‹è¾“å‡º...",
  "error": null
}
```

**è¿”å›ç»“æœï¼ˆå®‰å…¨æ ¡éªŒå¤±è´¥ï¼‰ï¼š**

```json
{
  "success": false,
  "task_id": "file-edit-xxx",
  "status": "security_check_failed",
  "error": "è·¯å¾„ '/etc/passwd' ä¸åœ¨å…è®¸çš„æ“ä½œèŒƒå›´å†…"
}
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```python
# ä¿®å¤ä»£ç ï¼ˆå…¨è‡ªåŠ¨ï¼‰
result = await tools.kimi_bridge.execute({
    "type": "file_edit",
    "instruction": "ä¿®å¤ autonomous-assessor.sh ç¬¬202è¡Œçš„ç®—æœ¯å±•å¼€é”™è¯¯ï¼Œç¡®ä¿ count å˜é‡æ˜¯æ•°å­—",
    "working_dir": "/root/.openclaw/workspace",
    "files": ["scripts/autonomous/autonomous-assessor.sh"]
})
# 5-15ç§’åè¿”å›ç»“æœ

# åˆ†ææ—¥å¿—ï¼ˆå…¨è‡ªåŠ¨ï¼‰
result = await tools.kimi_bridge.execute({
    "type": "analyze",
    "instruction": "åˆ†æä»Šå¤©çš„ç³»ç»Ÿæ—¥å¿—ï¼Œæ‰¾å‡ºæ‰€æœ‰ ERROR æ¡ç›®å¹¶ç»Ÿè®¡ç±»å‹",
    "working_dir": "/var/log",
    "files": ["syslog", "auth.log"]
})

# æœç´¢æ–‡ä»¶ï¼ˆå…¨è‡ªåŠ¨ï¼‰
result = await tools.kimi_bridge.execute({
    "type": "search",
    "instruction": "æœç´¢æ‰€æœ‰åŒ…å« 'TODO' çš„ Python æ–‡ä»¶",
    "working_dir": "/root/.openclaw/workspace"
})

# æ‰¹é‡æ“ä½œï¼ˆå…¨è‡ªåŠ¨ï¼‰
result = await tools.kimi_bridge.execute({
    "type": "batch",
    "instruction": "æ‰¹é‡é‡å‘½å logs ç›®å½•ä¸‹æ‰€æœ‰ .log æ–‡ä»¶ï¼Œæ·»åŠ ä»Šå¤©æ—¥æœŸå‰ç¼€",
    "working_dir": "/root/.openclaw/workspace/logs",
    "dry_run": true  # å…ˆé¢„è§ˆ
})
```

### `get_status`

æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€ã€‚

**è¾“å…¥ï¼š** `{"task_id": "xxx"}`

**è¿”å›ï¼š** `{"status": "pending|running|completed|failed", "progress": 0.5}`

### `get_result`

è·å–å·²å®Œæˆä»»åŠ¡çš„ç»“æœã€‚

**è¾“å…¥ï¼š** `{"task_id": "xxx"}`

**è¿”å›ï¼š** å®Œæ•´çš„ä»»åŠ¡ç»“æœå¯¹è±¡

### `list_pending`

åˆ—å‡ºæ‰€æœ‰å¾…å¤„ç†ä»»åŠ¡ã€‚

**è¾“å…¥ï¼š** `{}`

**è¿”å›ï¼š** `{"tasks": [{"task_id": "...", "type": "...", "created_at": "..."}]}`

### `get_security_report`

è·å–å®‰å…¨é…ç½®æŠ¥å‘Šã€‚

**è¾“å…¥ï¼š** `{}`

**è¿”å›ï¼š** å½“å‰å®‰å…¨ç­–ç•¥é…ç½®

## ğŸ”’ å®‰å…¨æœºåˆ¶

### å¤šå±‚é˜²æŠ¤

| é˜²æŠ¤å±‚ | æœºåˆ¶ | è¯´æ˜ |
|--------|------|------|
| **è·¯å¾„ç™½åå•** | å·¥ä½œç›®å½•é™åˆ¶ | åªèƒ½æ“ä½œæŒ‡å®šç›®å½•åŠå…¶å­ç›®å½• |
| **æ•æ„Ÿæ–‡ä»¶é»‘åå•** | æ­£åˆ™åŒ¹é… | ç¦æ­¢æ“ä½œ .envã€.ssh/ã€*.key ç­‰ |
| **æŒ‡ä»¤å®‰å…¨æ£€æŸ¥** | å…³é”®è¯è¿‡æ»¤ | æ£€æµ‹ deleteã€chmodã€sudo ç­‰å±é™©æ“ä½œ |
| **æ–‡ä»¶å¤§å°é™åˆ¶** | 100MB | é˜²æ­¢å¤§æ–‡ä»¶å¯¼è‡´è¶…æ—¶ |
| **æ‰§è¡Œè¶…æ—¶** | 120ç§’ | é˜²æ­¢æ— é™æ‰§è¡Œ |
| **æ²™ç®±æ‰§è¡Œ** | `--work-dir` | Kimi CLI è¢«é™åˆ¶åœ¨æŒ‡å®šç›®å½• |
| **è‡ªåŠ¨ç¡®è®¤** | `--yolo` | Kimi CLI è‡ªåŠ¨ç¡®è®¤æ“ä½œï¼Œä¸äº¤äº’ |

### æ•æ„Ÿæ–‡ä»¶é»‘åå•

```python
# ç¦æ­¢æ“ä½œçš„æ–‡ä»¶æ¨¡å¼
- .env, .env.*
- .ssh/, .gnupg/
- id_rsa, id_dsa, id_ecdsa, id_ed25519
- *.pem, *.key, *.p12, *.pfx
- credentials, secret, token, password, apikey, api_key
- /etc/passwd, /etc/shadow, /etc/hosts
- .bashrc, .bash_profile, .zshrc, .profile
- .git/config, .git/credentials
- *.sqlite, *.sqlite3, *.db
- openclaw.json, kimi/config
```

### ç™½åå•è·¯å¾„

```json
[
    "/root/.openclaw/workspace",
    "/tmp",
    "/var/log"
]
```

**æ³¨æ„**ï¼šå¦‚æœæŒ‡å®šçš„å·¥ä½œç›®å½•ä¸åœ¨ç™½åå•å†…ï¼Œä¼šè‡ªåŠ¨å›é€€åˆ°ç¬¬ä¸€ä¸ªç™½åå•ç›®å½•ã€‚

## âš™ï¸ å·¥ä½œåŸç†

### å…¨è‡ªåŠ¨æ‰§è¡Œæµç¨‹

```
OpenClaw è°ƒç”¨ execute()
        â†“
å®‰å…¨é¢„æ£€æŸ¥ï¼ˆè·¯å¾„ã€æ–‡ä»¶ã€æŒ‡ä»¤ï¼‰
        â†“
    â”Œâ”€â”€â”€â”´â”€â”€â”€â”
 é€šè¿‡       å¤±è´¥
    â†“         â†“
æ‰§è¡Œä»»åŠ¡   è¿”å›å®‰å…¨é”™è¯¯
    â†“
ç”Ÿæˆæç¤ºè¯
    â†“
subprocess è°ƒç”¨:
  kimi --prompt "..." --yolo --work-dir /path
    â†“
è§£æè¾“å‡ºï¼ˆæå–JSONã€æ–‡ä»¶åˆ—è¡¨ï¼‰
    â†“
æ›´æ–°ä»»åŠ¡çŠ¶æ€ (completed/failed)
    â†“
è¿”å›ç»“æ„åŒ–ç»“æœ
```

### æ‰§è¡Œæ—¶é—´

- ç®€å•ä»»åŠ¡ï¼ˆfile_editï¼‰ï¼š5-10 ç§’
- ä¸­ç­‰ä»»åŠ¡ï¼ˆanalyzeï¼‰ï¼š10-15 ç§’
- å¤æ‚ä»»åŠ¡ï¼ˆbatchï¼‰ï¼š15-30 ç§’

## ğŸ“¦ é…ç½®

**âš ï¸ é‡è¦**: ä¸è¦åœ¨ `openclaw.json` ä¸­æ·»åŠ  `skills.kimi_bridge` é…ç½®é”®ï¼è¿™ä¼šå¯¼è‡´ Gateway é…ç½®éªŒè¯å¤±è´¥ï¼Œæ— æ³•å¯åŠ¨ã€‚

### é›¶é…ç½®è®¾è®¡

Kimi Bridge é‡‡ç”¨**ç¡¬ç¼–ç è·¯å¾„ + è‡ªåŠ¨æ£€æµ‹**ï¼Œæ— éœ€ä¿®æ”¹ `openclaw.json`ï¼š

| é…ç½®é¡¹ | å®ç°æ–¹å¼ | è¯´æ˜ |
|--------|----------|------|
| `kimi_cli` | è‡ªåŠ¨æ£€æµ‹ | `executor.py` è‡ªåŠ¨æŸ¥æ‰¾å¸¸è§å®‰è£…è·¯å¾„ |
| `auto_mode` | ç¡¬ç¼–ç  | é»˜è®¤å¯ç”¨ (`True`) |
| `default_timeout` | ç¡¬ç¼–ç  | é»˜è®¤ 120 ç§’ |
| `allowed_base_paths` | ç¡¬ç¼–ç  | `['/root/.openclaw/workspace', '/tmp', '/var/log']` |
| `max_file_size_mb` | ç¡¬ç¼–ç  | 100 MB |

### å¦‚éœ€ä¿®æ”¹é…ç½®

ç›´æ¥ç¼–è¾‘ `skills/kimi-bridge/src/executor.py`ï¼š

```python
# ç¬¬ 27-35 è¡Œï¼šKIMI_CLI_PATHS åˆ—è¡¨ï¼Œæ·»åŠ æˆ–ä¿®æ”¹æœç´¢è·¯å¾„
KIMI_CLI_PATHS = [
    "/root/.vscode-server/data/User/globalStorage/moonshot-ai.kimi-code/bin/kimi/kimi",
    # æ·»åŠ ä½ çš„è·¯å¾„...
]

# ç¬¬ 180-186 è¡Œï¼šå®‰å…¨ç™½åå•
allowed_base_paths = [
    "/root/.openclaw/workspace",
    "/tmp", 
    "/var/log"
]
```

## ğŸ›¡ï¸ å›é€€æœºåˆ¶

è‡ªåŠ¨æ‰§è¡Œå¤±è´¥æ—¶ï¼Œè®¾ç½® `auto: false` å›é€€åˆ°æ‰‹åŠ¨æ¨¡å¼ï¼š

```python
result = await tools.kimi_bridge.execute({
    "type": "file_edit",
    "instruction": "...",
    "auto": false
})
```

## ğŸ“ æ–‡ä»¶ä½ç½®

### Kimi Bridge Skill
```
skills/kimi-bridge/
â”œâ”€â”€ SKILL.md              # æœ¬æ–‡æ¡£
â”œâ”€â”€ bridge-cli.py         # CLI å…¥å£
â”œâ”€â”€ openclay-tool.json    # OpenClaw å·¥å…·é…ç½®
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ executor.py       # æ ¸å¿ƒæ‰§è¡Œå™¨ï¼ˆå…¨è‡ªåŠ¨ï¼Œå« SessionManagerï¼‰
â”‚   â”œâ”€â”€ task_manager.py   # ä»»åŠ¡é˜Ÿåˆ—ç®¡ç†
â”‚   â”œâ”€â”€ security.py       # å®‰å…¨æ¨¡å—
â”‚   â””â”€â”€ result_parser.py  # ç»“æœè§£æå™¨
â”œâ”€â”€ tasks/
â”‚   â”œâ”€â”€ pending/          # å¾…å¤„ç†ä»»åŠ¡
â”‚   â”œâ”€â”€ completed/        # å·²å®Œæˆä»»åŠ¡
â”‚   â””â”€â”€ failed/           # å¤±è´¥ä»»åŠ¡
â”œâ”€â”€ logs/                 # æ‰§è¡Œæ—¥å¿—
â””â”€â”€ examples/             # ç¤ºä¾‹ä»»åŠ¡
```

### Bridge ç›®å½•ï¼ˆOpenClaw é›†æˆï¼‰
```
bridge/
â”œâ”€â”€ kimi-bridge-wrapper.sh    # Session-aware wrapperï¼ˆæ¨èå…¥å£ï¼‰
â”œâ”€â”€ openclaw-caller.sh        # OpenClaw è°ƒç”¨è„šæœ¬ï¼ˆå·²é›†æˆ wrapperï¼‰
â”œâ”€â”€ kimi-executor.sh          # æ‰‹åŠ¨æ‰§è¡Œå™¨ï¼ˆå¤‡ç”¨ï¼‰
â”œâ”€â”€ OPENCLAW-INTEGRATION.md   # é›†æˆæŒ‡å—
â””â”€â”€ tasks/                    # ä»»åŠ¡é˜Ÿåˆ—ï¼ˆä¸ skill å…±äº«ï¼‰
```

## ğŸ§ª æµ‹è¯•

```bash
cd /root/.openclaw/workspace/skills/kimi-bridge

# æµ‹è¯•å®‰å…¨æ¨¡å—
python3 src/security.py

# æµ‹è¯•æ‰§è¡Œå™¨
python3 bridge-cli.py execute --type file_edit \
  --instruction "åˆ›å»ºæµ‹è¯•æ–‡ä»¶" \
  --working-dir /tmp
```

## ğŸ”— Session ä¸Šä¸‹æ–‡ä¿æŒï¼ˆv2.1ï¼‰

Kimi Bridge v2.1 æ”¯æŒ **çœŸæ­£çš„è¿ç»­å¯¹è¯**ï¼Œè§£å†³é¢‘ç¹æ–°å¼€ä¼šè¯å¯¼è‡´çš„ä¸Šä¸‹æ–‡ä¸¢å¤±é—®é¢˜ã€‚

### åŸç†

**åŒæœºåˆ¶ä¿éšœè¿ç»­æ€§ï¼š**

1. **Kimi CLI `--continue`**ï¼ˆçœŸæ­£çš„è¿ç»­å¯¹è¯ï¼‰
   ```
   ç¬¬ä¸€æ¬¡è°ƒç”¨: kimi --prompt "ä»»åŠ¡A" --work-dir /tmp
   ç¬¬äºŒæ¬¡è°ƒç”¨: kimi --prompt "ä»»åŠ¡B" --work-dir /tmp --continue
                                      â†‘ ç»§ç»­åŒä¸€ä¸ª CLI ä¼šè¯
   ```

2. **Kimi Bridge Session Store**ï¼ˆå†å²ä¸Šä¸‹æ–‡ï¼‰
   ```
   OpenClaw Session ID â”€â”€â†’ /tmp/kimi-bridge-sessions/abc-123.json
   ```

### æ•ˆæœå¯¹æ¯”

| åœºæ™¯ | ä¹‹å‰ (v2.0) | ç°åœ¨ (v2.1) |
|------|------------|------------|
| OpenClaw: "å¸®æˆ‘ä¿®bug" | [æ–°è¿›ç¨‹] "ä»€ä¹ˆbugï¼Ÿ" | [ç»§ç»­ä¼šè¯] "å¥½çš„ï¼Œæ­£åœ¨ä¿®..." |
| OpenClaw: "è¿™é‡Œä¹Ÿä¿®ä¸€ä¸‹" | [æ–°è¿›ç¨‹] "å“ªé‡Œï¼Ÿ" | [ç»§ç»­ä¼šè¯] "å¥½çš„ï¼Œç»§ç»­ä¿®è¿™é‡Œ" |
| OpenClaw: "ç»§ç»­" | [æ–°è¿›ç¨‹] "ç»§ç»­ä»€ä¹ˆï¼Ÿ" | [ç»§ç»­ä¼šè¯] "æ˜ç™½ï¼Œç»§ç»­å½“å‰ä»»åŠ¡" |

### `--continue` è‡ªåŠ¨è§¦å‘æ¡ä»¶

åŒæ—¶æ»¡è¶³ä»¥ä¸‹æ¡ä»¶æ—¶ï¼Œè‡ªåŠ¨æ·»åŠ  `--continue` å‚æ•°ï¼š
1. æä¾›äº† `session_id`
2. è¯¥ session åœ¨è¯¥ `working_dir` ä¸‹**æˆåŠŸæ‰§è¡Œè¿‡ä»»åŠ¡**

**æ³¨æ„**ï¼šä¸åŒ `working_dir` ä¹‹é—´ä¸ä¼šè§¦å‘ `--continue`ï¼ˆå®‰å…¨éš”ç¦»ï¼‰

### ä½¿ç”¨æ–¹æ³•

**æ–¹æ³• 1: ä½¿ç”¨ Wrapper è„šæœ¬ï¼ˆæ¨èï¼‰**

OpenClaw åº”è°ƒç”¨ wrapper è„šæœ¬è€Œéç›´æ¥è°ƒç”¨ bridge-cli.pyï¼š
```bash
# âœ… æ­£ç¡®ï¼šwrapper è‡ªåŠ¨è¯»å– OpenClaw Session ID
./bridge/kimi-bridge-wrapper.sh execute \
  --type analyze \
  --instruction "åˆ†ææ—¥å¿—"

# æˆ–ä½¿ç”¨ openclaw-caller.shï¼ˆå†…éƒ¨å·²ä½¿ç”¨ wrapperï¼‰
./bridge/openclaw-caller.sh create \
  analyze \
  "åˆ†ææ—¥å¿—" \
  /var/log
```

**æ–¹æ³• 2: å‘½ä»¤è¡Œæ‰‹åŠ¨è°ƒç”¨**
```bash
# æ‰‹åŠ¨ä¼ é€’ session_id
python3 bridge-cli.py execute \
  --type analyze \
  --instruction "åˆ†ææ—¥å¿—" \
  --session-id "$OPENCLAW_SESSION_ID"
```

**æ–¹æ³• 3: OpenClaw ç›´æ¥é›†æˆ**
```python
# OpenClaw åœ¨è°ƒç”¨æ—¶ä¼ é€’ session_id
result = await tools.kimi_bridge.execute({
    "type": "file_edit",
    "instruction": "ä¿®å¤ bug",
    "session_id": current_session_id  # å…³é”®å‚æ•°ï¼
})
```

### ä¸Šä¸‹æ–‡å†…å®¹

æ¯ä¸ª Session è‡ªåŠ¨ä¿å­˜ï¼š
- æœ€è¿‘ 20 ä¸ªä»»åŠ¡å†å²
- ä»»åŠ¡ç±»å‹ã€æ‰§è¡Œç»“æœã€ä¿®æ”¹çš„æ–‡ä»¶
- æœ€åæ´»è·ƒæ—¶é—´

æç¤ºè¯è‡ªåŠ¨é™„åŠ å†å²æ‘˜è¦ï¼š
```
=== å½“å‰ä¼šè¯å†å² ===
1. âœ… æˆåŠŸåˆ—å‡º /tmp ç›®å½•ä¸‹å‰3ä¸ªæ–‡ä»¶
2. âœ… ä¿®å¤äº† config.yaml çš„è¯­æ³•é”™è¯¯

å½“å‰ä»»åŠ¡:
è¿™æ¬¡åˆ—å‡ºå‰2ä¸ªæ–‡ä»¶
```

---

## ğŸ”— ä¸å…¶ä»–å·¥å…·çš„å…³ç³»

### Kimi Bridge åœ¨å·¥å…·ç”Ÿæ€ä¸­çš„å®šä½

```
ç”¨æˆ·ä»»åŠ¡
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ script-advisor  â”‚ â† å†³ç­–å±‚ï¼šæ˜¯å¦ä½¿ç”¨è„šæœ¬ï¼Ÿä½¿ç”¨å“ªä¸ªï¼Ÿ
â”‚ (å››å±‚æ¶æ„)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ kimi-bridge.sh  â”‚ â†â”€â”€â†’â”‚ ç›´æ¥ç”¨ Skill    â”‚
â”‚ (ç»Ÿä¸€å…¥å£)      â”‚     â”‚ (OpenClawè°ƒç”¨)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ bridge-cli.py   â”‚ â† æ ¸å¿ƒæ‰§è¡Œå™¨
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
    Kimi CLI â†’ æ–‡ä»¶æ“ä½œ
```

### ä½•æ—¶ä½¿ç”¨å“ªç§æ–¹å¼ï¼Ÿ

| åœºæ™¯ | æ¨èæ–¹å¼ | åŸå›  |
|------|----------|------|
| **OpenClaw å¯¹è¯ä¸­** | ç›´æ¥è°ƒç”¨ skill | æœ€è‡ªç„¶ï¼Œè‡ªåŠ¨ä¸Šä¸‹æ–‡ |
| **å‘½ä»¤è¡Œå¿«é€Ÿæ“ä½œ** | `kimi-bridge.sh` | ç»Ÿä¸€å…¥å£ï¼Œè®°å¿†è´Ÿæ‹…å° |
| **è„šæœ¬/è‡ªåŠ¨åŒ–æµç¨‹** | `bridge-cli.py` | ç›´æ¥è°ƒç”¨ï¼Œæ— åŒ…è£…å±‚ |
| **æ‰¹é‡ä»»åŠ¡ç®¡ç†** | `kimi-bridge-manager.sh` | æ£€æŸ¥/å®‰è£…/æµ‹è¯•/çŠ¶æ€ |

### ä¸ script-advisor çš„é›†æˆ

`script-advisor` Skill è´Ÿè´£**å†³ç­–**ï¼ŒKimi Bridge è´Ÿè´£**æ‰§è¡Œ**ã€‚

**å†³ç­–æµç¨‹**:
```
ä»»åŠ¡è¾“å…¥
    â†“
script-advisor è¯„ä¼°ï¼š
  â€¢ æ˜¯å¦æ¶‰åŠæ–‡ä»¶æ“ä½œï¼Ÿ
  â€¢ æ–‡ä»¶å¤§å° > 1KBï¼Ÿ
  â€¢ Token é¢„ä¼° > 500ï¼Ÿ
    â†“
æ˜¯ â†’ æ¨è "ä½¿ç”¨ kimi-bridge (èŠ‚çœ 90% token)"
    â†“
è°ƒç”¨ kimi-bridge.sh analyze/edit/search/batch
```

### å‘½ä»¤è¡Œå·¥å…·å¯¹æ¯”

| å·¥å…· | ç”¨é€” | å¤æ‚åº¦ | æ¨èåº¦ |
|------|------|--------|--------|
| `kimi-bridge.sh <cmd>` | **ç»Ÿä¸€å…¥å£ï¼Œæ—¥å¸¸ä½¿ç”¨** | ä½ | â­â­â­ é¦–é€‰ |
| `bridge-cli.py` | ç¼–ç¨‹è°ƒç”¨ï¼Œç²¾ç»†æ§åˆ¶ | ä¸­ | â­â­ å¼€å‘ç”¨ |
| `kimi-bridge-manager.sh` | å®‰è£…/æ£€æŸ¥/æµ‹è¯• | ä½ | â­â­ ç»´æŠ¤ç”¨ |
| ~~`kimi-analyze.sh`~~ | ~~å·²åºŸå¼ƒ~~ | - | âŒ ä¸å†ä½¿ç”¨ |
| ~~`kimi-edit.sh`~~ | ~~å·²åºŸå¼ƒ~~ | - | âŒ ä¸å†ä½¿ç”¨ |
| ~~`kimi-search.sh`~~ | ~~å·²åºŸå¼ƒ~~ | - | âŒ ä¸å†ä½¿ç”¨ |
| ~~`kimi-batch.sh`~~ | ~~å·²åºŸå¼ƒ~~ | - | âŒ ä¸å†ä½¿ç”¨ |

### å¿«é€Ÿå‚è€ƒ

```bash
# æ¨èï¼šç»Ÿä¸€å…¥å£ï¼ˆä¸€ä¸ªå‘½ä»¤ï¼Œå¤šç§ä»»åŠ¡ï¼‰
kimi-bridge.sh analyze "åˆ†ææ—¥å¿—" /var/log
kimi-bridge.sh edit --dry-run "ä¿®å¤bug" /project
kimi-bridge.sh search "æŸ¥æ‰¾TODO" /project
kimi-bridge.sh batch --dry-run "æ‰¹é‡é‡å‘½å" /logs

# å¤‡ç”¨ï¼šç›´æ¥è°ƒç”¨ CLI
cd /root/.openclaw/workspace/skills/kimi-bridge
python3 bridge-cli.py execute --type analyze --instruction "åˆ†æ" --working-dir /tmp

# ç®¡ç†ï¼šæ£€æŸ¥å’Œæµ‹è¯•
kimi-bridge-manager.sh check   # ç¯å¢ƒæ£€æŸ¥
kimi-bridge-manager.sh status  # çŠ¶æ€æŸ¥çœ‹
kimi-bridge-manager.sh test    # åŠŸèƒ½æµ‹è¯•
```

---

## ğŸ“ ç‰ˆæœ¬å†å²

- **v2.2** (2026-02-04): ç»Ÿä¸€å…¥å£é‡æ„
  - åˆå¹¶ kimi-analyze/edit/search/batch.sh ä¸ºå•ä¸€å…¥å£
  - ç®€åŒ–ä½¿ç”¨ï¼Œå‡å°‘ç»´æŠ¤è´Ÿæ‹…
  - æ·»åŠ ä¸å…¶ä»–å·¥å…·çš„å…³ç³»æ–‡æ¡£
- **v2.1** (2026-02-04): Session ä¸Šä¸‹æ–‡ä¿æŒ
  - è§£å†³é¢‘ç¹æ–°å¼€ä¼šè¯å¯¼è‡´çš„ä¸Šä¸‹æ–‡ä¸¢å¤±é—®é¢˜
  - æ·»åŠ  `--session-id` å‚æ•°æ”¯æŒ
  - è‡ªåŠ¨ä¿å­˜/åŠ è½½ä»»åŠ¡å†å²ï¼Œæç¤ºè¯é™„åŠ ä¸Šä¸‹æ–‡
- **v2.0.1** (2026-02-04): ä¿®å¤ Kimi CLI è·¯å¾„æ£€æµ‹é—®é¢˜
  - OpenClaw è¿›ç¨‹ PATH ä¸ shell PATH ä¸ä¸€è‡´å¯¼è‡´æ‰¾ä¸åˆ° kimi å‘½ä»¤
  - æ·»åŠ è‡ªåŠ¨æ£€æµ‹é€»è¾‘ï¼Œæ‰«æå¸¸è§å®‰è£…è·¯å¾„
- **v2.0** (2026-02-04): å…¨è‡ªåŠ¨æ¨¡å¼ï¼Œæ·»åŠ å®‰å…¨æ¨¡å—ï¼Œé›¶äººå·¥ä»‹å…¥
- **v1.0** (2026-02-04): åˆå§‹ç‰ˆæœ¬ï¼ŒåŠè‡ªåŠ¨ï¼ˆéœ€äººå·¥æ‰§è¡Œï¼‰

---

**ç‰ˆæœ¬**: 2.2  
**ä½œè€…**: Kimi Code  
**åè®®**: MIT
